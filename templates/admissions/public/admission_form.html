{% load static %}
{% extends 'base.html' %}

{% block title %}Admission Form{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <!-- No Login Required Alert -->
            <div class="alert alert-success alert-dismissible fade show mb-4" role="alert">
                <i class="fas fa-check-circle me-2"></i>
                <strong>Easy Application Process!</strong> No account or login required. Complete the form below and submit directly.
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>

            <h1 class="display-4 text-center mb-2" data-aos="fade-down">Admission Application Form</h1>
            <p class="lead text-center text-muted mb-4" data-aos="fade-up" data-aos-delay="200">
                Apply to {{ school.name|default:"our school" }} - No registration needed, just fill out and submit
            </p>
            
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="fas fa-edit me-2"></i>Application Details</h5>
                </div>
                <div class="card-body">
                    <form method="post" id="admissionForm">
                        {% csrf_token %}
                        
                        <!-- Personal Information Section -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="form-group">
                                    {{ form.first_name.label_tag }}
                                    {{ form.first_name }}
                                    {% if form.first_name.errors %}
                                        <div class="text-danger small">{{ form.first_name.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    {{ form.last_name.label_tag }}
                                    {{ form.last_name }}
                                    {% if form.last_name.errors %}
                                        <div class="text-danger small">{{ form.last_name.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="form-group">
                                    {{ form.middle_name.label_tag }}
                                    {{ form.middle_name }}
                                    {% if form.middle_name.errors %}
                                        <div class="text-danger small">{{ form.middle_name.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    {{ form.date_of_birth.label_tag }}
                                    {{ form.date_of_birth }}
                                    {% if form.date_of_birth.errors %}
                                        <div class="text-danger small">{{ form.date_of_birth.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="form-group">
                                    {{ form.gender.label_tag }}
                                    {{ form.gender }}
                                    {% if form.gender.errors %}
                                        <div class="text-danger small">{{ form.gender.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    {{ form.email.label_tag }}
                                    {{ form.email }}
                                    {% if form.email.errors %}
                                        <div class="text-danger small">{{ form.email.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="form-group">
                                    {{ form.phone.label_tag }}
                                    {{ form.phone }}
                                    {% if form.phone.errors %}
                                        <div class="text-danger small">{{ form.phone.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    {{ form.applying_for_class.label_tag }}
                                    {{ form.applying_for_class }}
                                    {% if form.applying_for_class.errors %}
                                        <div class="text-danger small">{{ form.applying_for_class.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <!-- Address Information -->
                        <div class="mb-4">
                            <h6 class="text-primary mb-3"><i class="fas fa-home me-2"></i>Address Information</h6>
                            <div class="form-group mb-3">
                                {{ form.address.label_tag }}
                                {{ form.address }}
                                {% if form.address.errors %}
                                    <div class="text-danger small">{{ form.address.errors.0 }}</div>
                                {% endif %}
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        {{ form.city.label_tag }}
                                        {{ form.city }}
                                        {% if form.city.errors %}
                                            <div class="text-danger small">{{ form.city.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        {{ form.state.label_tag }}
                                        {{ form.state }}
                                        {% if form.state.errors %}
                                            <div class="text-danger small">{{ form.state.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        {{ form.country.label_tag }}
                                        {{ form.country }}
                                        {% if form.country.errors %}
                                            <div class="text-danger small">{{ form.country.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Previous School Information -->
                        <div class="mb-4">
                            <h6 class="text-primary mb-3"><i class="fas fa-school me-2"></i>Previous School Information</h6>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        {{ form.previous_school.label_tag }}
                                        {{ form.previous_school }}
                                        {% if form.previous_school.errors %}
                                            <div class="text-danger small">{{ form.previous_school.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        {{ form.previous_class.label_tag }}
                                        {{ form.previous_class }}
                                        {% if form.previous_class.errors %}
                                            <div class="text-danger small">{{ form.previous_class.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Parent/Guardian Information -->
                        <div class="mb-4">
                            <h6 class="text-primary mb-3"><i class="fas fa-users me-2"></i>Parent/Guardian Information</h6>
                            
                            <!-- Father Information -->
                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        {{ form.father_name.label_tag }}
                                        {{ form.father_name }}
                                        {% if form.father_name.errors %}
                                            <div class="text-danger small">{{ form.father_name.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        {{ form.father_phone.label_tag }}
                                        {{ form.father_phone }}
                                        {% if form.father_phone.errors %}
                                            <div class="text-danger small">{{ form.father_phone.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        {{ form.father_email.label_tag }}
                                        {{ form.father_email }}
                                        {% if form.father_email.errors %}
                                            <div class="text-danger small">{{ form.father_email.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Mother Information -->
                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        {{ form.mother_name.label_tag }}
                                        {{ form.mother_name }}
                                        {% if form.mother_name.errors %}
                                            <div class="text-danger small">{{ form.mother_name.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        {{ form.mother_phone.label_tag }}
                                        {{ form.mother_phone }}
                                        {% if form.mother_phone.errors %}
                                            <div class="text-danger small">{{ form.mother_phone.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        {{ form.mother_email.label_tag }}
                                        {{ form.mother_email }}
                                        {% if form.mother_email.errors %}
                                            <div class="text-danger small">{{ form.mother_email.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Guardian Information -->
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        {{ form.guardian_name.label_tag }}
                                        {{ form.guardian_name }}
                                        {% if form.guardian_name.errors %}
                                            <div class="text-danger small">{{ form.guardian_name.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        {{ form.guardian_phone.label_tag }}
                                        {{ form.guardian_phone }}
                                        {% if form.guardian_phone.errors %}
                                            <div class="text-danger small">{{ form.guardian_phone.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        {{ form.guardian_email.label_tag }}
                                        {{ form.guardian_email }}
                                        {% if form.guardian_email.errors %}
                                            <div class="text-danger small">{{ form.guardian_email.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        {{ form.guardian_relationship.label_tag }}
                                        {{ form.guardian_relationship }}
                                        {% if form.guardian_relationship.errors %}
                                            <div class="text-danger small">{{ form.guardian_relationship.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Submit Button -->
                        <div class="text-center">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-paper-plane me-2"></i>Submit Application
                            </button>
                            <a href="{% url 'admissions:admission_status' %}" class="btn btn-outline-secondary ms-2">
                                <i class="fas fa-search me-2"></i>Check Status
                            </a>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Info Section -->
            <div class="row mt-4">
                <div class="col-md-6">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h6 class="card-title"><i class="fas fa-info-circle text-info me-2"></i> Before You Start</h6>
                            <ul class="small mb-0">
                                <li>Have your child's birth certificate information ready</li>
                                <li>Prepare previous school records if transferring</li>
                                <li>Medical/immunization records if available</li>
                                <li>Estimated completion time: 10-15 minutes</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h6 class="card-title"><i class="fas fa-envelope text-success me-2"></i> After Submission</h6>
                            <ul class="small mb-0">
                                <li>You'll receive a confirmation email immediately</li>
                                <li>Your application reference number will be sent to your email</li>
                                <li>Track application status anytime using your reference number</li>
                                <li>Our team will review your application within 3-5 business days</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Support Section -->
            <div class="alert alert-info mt-4" role="alert">
                <i class="fas fa-question-circle me-2"></i>
                <strong>Need Help?</strong> Contact our admissions office if you have any questions during the application process.
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
/* Styles specific to Admission Form */
.card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 16px rgba(0,0,0,0.1);
}

.alert-success {
    background-color: #d4edda;
    border-color: #c3e6cb;
}

.alert-success .alert-heading,
.alert-success strong {
    color: #155724;
}
</style>
{% endblock %}

{% block extra_js %}
<script>
// JS for Admission Form
document.addEventListener('DOMContentLoaded', function() {
    console.log('Admission form page loaded - No login required');
});
</script>
{% endblock %}
